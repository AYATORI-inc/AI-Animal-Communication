<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>どうぶつ えさやり チャット</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 背景（動物園マップ風） -->
  <div class="bgMap" aria-hidden="true">
    <div class="areaName a1">SAVANNA</div>
    <div class="areaName a2">POLAR</div>
    <div class="areaName a3">FOREST</div>
    <div class="areaName a4">BAMBOO</div>
  </div>

  <div class="app">
    <header class="appHeader">
      <div class="brand">
        <span class="brandMark">🐾</span>
        <span class="brandTitle">どうぶつ えさやり チャット</span>
      </div>
      <div class="brandSub">※ 画像生成は現在オフ（必要になったら実装します）</div>
    </header>

    <main class="main">
      <!-- 動物選択（トップページ） -->
      <section id="screenSelect" class="screen isActive" aria-label="動物選択">
        <div class="card selectCard">
          <div class="screenTop">
            <div class="screenIcon">🧭</div>
            <div class="screenLead">すきな どうぶつを えらんでね</div>
          </div>

          <div class="animalRow" role="group" aria-label="動物を選ぶ">
            <button class="animalBtn" type="button" data-animal="lion">
              <img src="./img/raion.jpg" alt="ライオン" width="96" height="96" />
              <span class="animalBtnName">ライオン</span>
            </button>

            <button class="animalBtn" type="button" data-animal="penguin">
              <img src="./img/pengin.jpg" alt="ペンギン" width="96" height="96" />
              <span class="animalBtnName">ペンギン</span>
            </button>

            <button class="animalBtn" type="button" data-animal="capybara">
              <img src="./img/kapipara.jpg" alt="カピバラ" width="96" height="96" />
              <span class="animalBtnName">カピバラ</span>
            </button>

            <button class="animalBtn" type="button" data-animal="panda">
              <img src="./img/panda.jpg" alt="パンダ" width="96" height="96" />
              <span class="animalBtnName">パンダ</span>
            </button>
          </div>

          <div class="bottomPrompt" aria-label="案内">
            どの　どうぶつに　えさを　あげる？
          </div>
        </div>
      </section>

      <!-- えさ選択画面 -->
      <section id="screenGame" class="screen" aria-label="えさをあげる">
        <div class="layout">
          <!-- 左：動物表示 -->
          <section class="panel animalPanel" aria-label="動物エリア">
            <div class="panelHeader">
              <div class="panelTitle">
                <span class="panelIcon">🦴</span>
                <span>えさを あげよう</span>
              </div>
              <button id="btnBackToSelect" class="btn small" type="button" aria-label="動物選択にもどる">もどる</button>
            </div>

            <div class="animalCard">
              <div class="animalArt" id="animalArtBox">
                <img id="animalImg" src="" alt="" />
              </div>

              <div class="animalMeta">
                <div id="animalName" class="animalName">—</div>
                <div id="animalTag" class="animalTag">—</div>
              </div>

              <div class="begBox" aria-label="おねだりセリフ">
                <div class="begLabel">おねだり</div>
                <div id="begLine" class="begLine">…</div>
              </div>
            </div>
          </section>

          <!-- 右：チャット＆操作 -->
          <section class="panel chatPanel" aria-label="チャットエリア">
            <div class="panelHeader">
              <div class="panelTitle">
                <span class="panelIcon">💬</span>
                <span>チャット</span>
              </div>
              <div class="small">動物の反応がここに出るよ</div>
            </div>

            <div id="chatLog" class="chatLog" role="log" aria-live="polite" aria-relevant="additions"></div>

            <div class="controls">
              <div class="quickRow" aria-label="クイック選択">
                <button class="btn" data-quick="肉" type="button">🍖 肉</button>
                <button class="btn" data-quick="魚" type="button">🐟 魚</button>
                <button class="btn" data-quick="草" type="button">🌿 草</button>
                <button class="btn" data-quick="野菜" type="button">🥕 野菜</button>
              </div>

              <div class="freeRow" aria-label="自由入力">
                <label class="srOnly" for="freeInput">自由入力</label>
                <input id="freeInput" class="input" type="text"
                  placeholder="例：お母さんの手作りハンバーグ / 魔法の薬 / ふわふわパンケーキ…" maxlength="50" />
                <button id="btnSend" class="btn primary" type="button">あげる</button>
              </div>

              <div class="small muted">
                ※ 危ない言葉（暴力・性表現など）はブロックされます。
              </div>
            </div>
          </section>
        </div>
      </section>

      <!-- 結果画面（個別ページ） -->
      <section id="screenResult" class="screen" aria-label="けっか">
        <div class="card resultCard">
          <div class="screenTop">
            <div class="screenIcon">🏁</div>
            <div class="screenLead">けっか</div>
          </div>

          <div id="resultSub" class="resultSub">—</div>

          <div class="resultGrid">
            <div class="resultAnimal">
              <div class="animalArt big">
                <img id="resultAnimalImg" src="" alt="" />
              </div>
              <div id="resultArt" class="resultArt" aria-hidden="true">✨</div>
            </div>

            <pre id="resultText" class="resultText">—</pre>
          </div>

          <div class="resultActions">
            <button id="btnResultNext" class="btn primary" type="button">
              どうぶつせんたくへ
            </button>
          </div>
        </div>
      </section>

      <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

      <!-- 待機演出：もぐもぐ（上下に揺れる） -->
      <div class="loadingOverlay" id="loadingOverlay" aria-hidden="true">
        <div class="loadingCard">
          <div class="loadingAnimal bob">
            <img id="loadingAnimalImg" src="" alt="" />
          </div>
          <div class="loadingText">
            <strong>もぐもぐ…</strong>
            <p id="loadingLine">動物が味わっています…</p>
            <p class="small muted">（えさを食べているあいだ、アイコンが上下に揺れます）</p>
          </div>
        </div>
      </div>
    </main>

    <footer class="appFooter">
      <div class="small muted">© プロトタイプ / ローカルで動作（外部API未接続）</div>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
