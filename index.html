<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>どうぶつ えさやり チャット</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 背景（imgフォルダから参照）※ラベル文字は除外 -->
  <div class="bgScene" aria-hidden="true"></div>

  <div class="appShell">
    <main class="main">
      <!-- タイトル（動物選択） -->
      <section id="screenSelect" class="screen isActive" aria-label="動物選択">
        <div class="titleScreen">
          <div class="titleTop">
            <div class="titleKicker">AIアニマル えさやり チャット</div>

            <!-- 開発用：GAS設定 -->
            <div class="apiTools" aria-label="API設定">
              <span id="apiBadge" class="apiBadge" aria-hidden="true">API:OFF</span>
              <button id="btnApiOpen" class="tinyBtn" type="button">API設定</button>
            </div>
          </div>

          <div class="animalRowWide" role="group" aria-label="どうぶつをえらぶ">
            <button class="pickTile" type="button" data-animal="lion" aria-label="ライオンをえらぶ">
              <div class="tileFrame">
                <img class="tileImg" src="./img/raion.webp" alt="ライオン" />
              </div>
              <div class="tileTag">ライオン</div>
            </button>

            <button class="pickTile" type="button" data-animal="penguin" aria-label="ペンギンをえらぶ">
              <div class="tileFrame">
                <img class="tileImg" src="./img/pengin.webp" alt="ペンギン" />
              </div>
              <div class="tileTag">ペンギン</div>
            </button>

            <button class="pickTile" type="button" data-animal="capybara" aria-label="カピバラをえらぶ">
              <div class="tileFrame">
                <img class="tileImg" src="./img/kapipara.webp" alt="カピバラ" />
              </div>
              <div class="tileTag">カピバラ</div>
            </button>

            <button class="pickTile" type="button" data-animal="panda" aria-label="パンダをえらぶ">
              <div class="tileFrame">
                <img class="tileImg" src="./img/panda.webp" alt="パンダ" />
              </div>
              <div class="tileTag">パンダ</div>
            </button>
          </div>

          <div class="titlePrompt" aria-label="案内">どの　どうぶつに　えさを　あげる？</div>
        </div>
      </section>

      <!-- えさ選択 -->
      <section id="screenGame" class="screen" aria-label="えさをあげる">
        <div class="card gameCard">
          <div class="gameStack">
            <div class="begBox bigBeg" aria-label="おねだり">
              <div class="begLabel">おねだり</div>
              <div id="begLine" class="begLine">…</div>
            </div>

            <div class="animalShow" aria-label="どうぶつ">
              <img id="animalImg" src="" alt="" />
            </div>

            <div class="foodArea" aria-label="えさのせんたく">
              <div class="quickRow" aria-label="クイック">
                <button class="btn" data-quick="肉" type="button">🍖 肉</button>
                <button class="btn" data-quick="魚" type="button">🐟 魚</button>
                <button class="btn" data-quick="草" type="button">🌿 草</button>
                <button class="btn" data-quick="野菜" type="button">🥕 野菜</button>
              </div>

              <div class="freeRow" aria-label="自由入力">
                <label class="srOnly" for="freeInput">自由入力</label>
                <input id="freeInput" class="input" type="text"
                  placeholder="じゆうに えさを いれてね（例：手作りハンバーグ / まほうのドリンク）"
                  maxlength="50" />
                <button id="btnSend" class="btn primary" type="button">えさを あげる</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 結果（個別ページ） -->
      <section id="screenResult" class="screen" aria-label="けっか">
        <div class="card resultCard">
          <div class="resultTop">
            <div class="resultIcon" aria-hidden="true">🏁</div>
            <div class="resultTitleBlock">
              <div class="resultTitle">けっか</div>
              <div id="resultSub" class="resultSub">入力：—</div>
            </div>
          </div>

          <div class="resultGrid">
            <div class="resultLeft">
              <div class="resultAnimal">
                <div class="resultEmoji" id="resultEmoji" aria-hidden="true">✨</div>
                <div class="resultAnimalPic"><img id="resultAnimalImg" src="" alt="" /></div>
              </div>
            </div>

            <pre id="resultText" class="resultText">—</pre>
          </div>

          <div class="resultActions">
            <button id="btnResultBack" class="btn primary" type="button">どうぶつせんたくへ</button>
          </div>
        </div>
      </section>

      <!-- トースト -->
      <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

      <!-- 待機演出：もぐもぐ（上下に揺れる） -->
      <div class="loadingOverlay" id="loadingOverlay" aria-hidden="true">
        <div class="loadingCard">
          <div class="loadingAnimal bob">
            <img id="loadingAnimalImg" src="" alt="" />
          </div>
          <div class="loadingText">
            <strong>もぐもぐ…</strong>
            <p id="loadingLine">動物が味わっています…</p>
          </div>
        </div>
      </div>

      <!-- GAS設定モーダル（開発用） -->
      <div id="apiModal" class="modal" aria-hidden="true">
        <div class="modalCard" role="dialog" aria-label="GAS設定">
          <div class="modalTitle">GAS Web App URL</div>
          <input id="gasUrlInput" class="input" type="text" placeholder="https://script.google.com/macros/s/XXXXX/exec" />
          <div class="modalActions">
            <button id="btnApiTest" class="btn" type="button">接続テスト</button>
            <button id="btnApiSave" class="btn primary" type="button">保存</button>
            <button id="btnApiClose" class="btn" type="button">閉じる</button>
          </div>
          <div id="apiStatus" class="modalHint">※ URLは端末内に保存されます（localStorage）</div>
        </div>
      </div>

    </main>

    <footer class="appFooter">
      <span class="small muted">©AYATORI-INC</span>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
