<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>どうぶつ えさやり チャット</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 背景（imgフォルダから参照） -->
  <div class="bgScene" aria-hidden="true"></div>
  <div class="mapLabels" aria-hidden="true">
    <span class="label l1">SAVANNA</span>
    <span class="label l2">POLAR</span>
    <span class="label l3">FOREST</span>
    <span class="label l4">BAMBOO</span>
    <span class="label l5">GATE</span>
  </div>

  <div class="appShell">
    <main class="main">
      <!-- 動物選択（トップページ） -->
      <section id="screenSelect" class="screen isActive" aria-label="動物選択">
        <div class="card selectCard">
          <div class="animalRow" role="group" aria-label="どうぶつをえらぶ">
            <button class="pickTile" type="button" data-animal="lion" aria-label="ライオンをえらぶ">
              <div class="tileEmoji">
                <img class="tileImg" src="./img/raion.webp" alt="ライオン" />
              </div>
              <div class="tileName">ライオン</div>
            </button>

            <button class="pickTile" type="button" data-animal="penguin" aria-label="ペンギンをえらぶ">
              <div class="tileEmoji">
                <img class="tileImg" src="./img/pengin.webp" alt="ペンギン" />
              </div>
              <div class="tileName">ペンギン</div>
            </button>

            <button class="pickTile" type="button" data-animal="capybara" aria-label="カピバラをえらぶ">
              <div class="tileEmoji">
                <img class="tileImg" src="./img/kapipara.webp" alt="カピバラ" />
              </div>
              <div class="tileName">カピバラ</div>
            </button>

            <button class="pickTile" type="button" data-animal="panda" aria-label="パンダをえらぶ">
              <div class="tileEmoji">
                <img class="tileImg" src="./img/panda.webp" alt="パンダ" />
              </div>
              <div class="tileName">パンダ</div>
            </button>
          </div>

          <div class="bottomPrompt" aria-label="案内">どの　どうぶつに　えさを　あげる？</div>
        </div>
      </section>

      <!-- えさ選択 -->
      <section id="screenGame" class="screen" aria-label="えさをあげる">
        <div class="layout">
          <!-- 左：どうぶつ -->
          <section class="panel animalPanel" aria-label="どうぶつ">
            <div class="panelHeader">
              <div class="panelTitle">
                <span class="panelIcon" aria-hidden="true">🦴</span>
                <span>えさを あげよう</span>
              </div>
              <button id="btnBackToSelect" class="btn small" type="button">もどる</button>
            </div>

            <div class="animalCard">
              <div class="animalArt" id="animalArtBox">
                <img id="animalImg" src="" alt="" />
              </div>

              <div class="animalMeta">
                <div id="animalName" class="animalName">—</div>
                <div id="animalPersona" class="animalPersona">—</div>
              </div>

              <div class="begBox" aria-label="おねだり">
                <div class="begLabel">おねだり</div>
                <div id="begLine" class="begLine">…</div>
              </div>
            </div>
          </section>

          <!-- 右：チャット -->
          <section class="panel chatPanel" aria-label="チャット">
            <div class="panelHeader">
              <div class="panelTitle">
                <span class="panelIcon" aria-hidden="true">💬</span>
                <span>ボタン 4つ or じゆうに いれてね</span>
              </div>
              <div class="small muted">動物の反応がここに出るよ</div>
            </div>

            <div id="chatLog" class="chatLog" role="log" aria-live="polite" aria-relevant="additions"></div>

            <div class="controls">
              <div class="quickRow" aria-label="クイック">
                <button class="btn" data-quick="肉" type="button">🍖 肉</button>
                <button class="btn" data-quick="魚" type="button">🐟 魚</button>
                <button class="btn" data-quick="草" type="button">🌿 草</button>
                <button class="btn" data-quick="野菜" type="button">🥕 野菜</button>
              </div>

              <div class="freeRow" aria-label="自由入力">
                <label class="srOnly" for="freeInput">自由入力</label>
                <input id="freeInput" class="input" type="text"
                  placeholder="例：お母さんの手作りハンバーグ / 魔法の薬 / ふわふわパンケーキ…"
                  maxlength="50" />
                <button id="btnSend" class="btn primary" type="button">あげる</button>
              </div>

              <div class="small muted">※ 危ない言葉はブロックされます。</div>
            </div>
          </section>
        </div>
      </section>

      <!-- 結果（個別ページ） -->
      <section id="screenResult" class="screen" aria-label="けっか">
        <div class="card resultCard">
          <div class="resultTop">
            <div class="resultIcon" aria-hidden="true">🏁</div>
            <div class="resultTitleBlock">
              <div class="resultTitle">けっか</div>
              <div id="resultSub" class="resultSub">入力：—</div>
            </div>
          </div>

          <div class="resultGrid">
            <div class="resultLeft">
              <div class="resultAnimal">
                <div class="resultEmoji" id="resultEmoji" aria-hidden="true">✨</div>
                <div class="resultAnimalPic">
                  <img id="resultAnimalImg" src="" alt="" />
                </div>
              </div>
            </div>

            <pre id="resultText" class="resultText">—</pre>
          </div>

          <div class="resultActions">
            <button id="btnResultBack" class="btn primary" type="button">どうぶつせんたくへ</button>
          </div>
        </div>
      </section>

      <!-- トースト -->
      <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

      <!-- 待機演出：もぐもぐ（上下に揺れる） -->
      <div class="loadingOverlay" id="loadingOverlay" aria-hidden="true">
        <div class="loadingCard">
          <div class="loadingAnimal bob">
            <img id="loadingAnimalImg" src="" alt="" />
          </div>
          <div class="loadingText">
            <strong>もぐもぐ…</strong>
            <p id="loadingLine">動物が味わっています…</p>
          </div>
        </div>
      </div>

    </main>

    <footer class="appFooter">
      <span class="small muted">©AYATORI-INC</span>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
